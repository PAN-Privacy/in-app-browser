var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
import { IonicNativePlugin, checkAvailability, cordova } from '@ionic-native/core';
import { Observable } from 'rxjs';
/**
 * For description on error codes, please visit https://github.com/nordnet/cordova-hot-code-push/wiki/Error-codes
 */
export var ErrorCode;
(function (ErrorCode) {
    ErrorCode[ErrorCode["NOTHING_TO_INSTALL"] = 1] = "NOTHING_TO_INSTALL";
    ErrorCode[ErrorCode["NOTHING_TO_UPDATE"] = 2] = "NOTHING_TO_UPDATE";
    ErrorCode[ErrorCode["FAILED_TO_DOWNLOAD_APPLICATION_CONFIG"] = -1] = "FAILED_TO_DOWNLOAD_APPLICATION_CONFIG";
    ErrorCode[ErrorCode["APPLICATION_BUILD_VERSION_TOO_LOW"] = -2] = "APPLICATION_BUILD_VERSION_TOO_LOW";
    ErrorCode[ErrorCode["FAILED_TO_DOWNLOAD_CONTENT_MANIFEST"] = -3] = "FAILED_TO_DOWNLOAD_CONTENT_MANIFEST";
    ErrorCode[ErrorCode["FAILED_TO_DOWNLOAD_UPDATE_FILES"] = -4] = "FAILED_TO_DOWNLOAD_UPDATE_FILES";
    ErrorCode[ErrorCode["FAILED_TO_MOVE_LOADED_FILES_TO_INSTALLATION_FOLDER"] = -5] = "FAILED_TO_MOVE_LOADED_FILES_TO_INSTALLATION_FOLDER";
    ErrorCode[ErrorCode["UPDATE_IS_INVALID"] = -6] = "UPDATE_IS_INVALID";
    ErrorCode[ErrorCode["FAILED_TO_COPY_FILES_FROM_PREVIOUS_RELEASE"] = -7] = "FAILED_TO_COPY_FILES_FROM_PREVIOUS_RELEASE";
    ErrorCode[ErrorCode["FAILED_TO_COPY_NEW_CONTENT_FILES"] = -8] = "FAILED_TO_COPY_NEW_CONTENT_FILES";
    ErrorCode[ErrorCode["LOCAL_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND"] = -9] = "LOCAL_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND";
    ErrorCode[ErrorCode["LOCAL_VERSION_OF_MANIFEST_NOT_FOUND"] = -10] = "LOCAL_VERSION_OF_MANIFEST_NOT_FOUND";
    ErrorCode[ErrorCode["LOADED_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND"] = -11] = "LOADED_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND";
    ErrorCode[ErrorCode["LOADED_VERSION_OF_MANIFEST_NOT_FOUND"] = -12] = "LOADED_VERSION_OF_MANIFEST_NOT_FOUND";
    ErrorCode[ErrorCode["FAILED_TO_INSTALL_ASSETS_ON_EXTERNAL_STORAGE"] = -13] = "FAILED_TO_INSTALL_ASSETS_ON_EXTERNAL_STORAGE";
    ErrorCode[ErrorCode["CANT_INSTALL_WHILE_DOWNLOAD_IN_PROGRESS"] = -14] = "CANT_INSTALL_WHILE_DOWNLOAD_IN_PROGRESS";
    ErrorCode[ErrorCode["CANT_DOWNLOAD_UPDATE_WHILE_INSTALLATION_IN_PROGRESS"] = -15] = "CANT_DOWNLOAD_UPDATE_WHILE_INSTALLATION_IN_PROGRESS";
    ErrorCode[ErrorCode["INSTALLATION_ALREADY_IN_PROGRESS"] = -16] = "INSTALLATION_ALREADY_IN_PROGRESS";
    ErrorCode[ErrorCode["DOWNLOAD_ALREADY_IN_PROGRESS"] = -17] = "DOWNLOAD_ALREADY_IN_PROGRESS";
    ErrorCode[ErrorCode["ASSETS_FOLDER_IS_NOT_YET_INSTALLED"] = -18] = "ASSETS_FOLDER_IS_NOT_YET_INSTALLED";
    ErrorCode[ErrorCode["NEW_APPLICATION_CONFIG_IS_INVALID"] = -19] = "NEW_APPLICATION_CONFIG_IS_INVALID";
})(ErrorCode || (ErrorCode = {}));
var HotCodePushOriginal = /** @class */ (function (_super) {
    __extends(HotCodePushOriginal, _super);
    function HotCodePushOriginal() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HotCodePushOriginal.prototype.requestApplicationUpdate = function (message) { return cordova(this, "requestApplicationUpdate", {}, arguments); };
    HotCodePushOriginal.prototype.fetchUpdate = function (options) {
        var _this = this;
        return (function () {
            if (checkAvailability(_this) === true) {
                return new Promise(function (resolve, reject) {
                    HotCodePushOriginal.getPlugin().fetchUpdate(function (error, data) {
                        if (error) {
                            reject(error);
                        }
                        else {
                            resolve(data);
                        }
                    }, options);
                });
            }
        })();
    };
    HotCodePushOriginal.prototype.installUpdate = function () { return cordova(this, "installUpdate", { "callbackStyle": "node" }, arguments); };
    HotCodePushOriginal.prototype.isUpdateAvailableForInstallation = function () { return cordova(this, "isUpdateAvailableForInstallation", { "callbackStyle": "node" }, arguments); };
    HotCodePushOriginal.prototype.getVersionInfo = function () { return cordova(this, "getVersionInfo", { "callbackStyle": "node" }, arguments); };
    HotCodePushOriginal.prototype.onUpdateIsReadyToInstall = function () { return cordova(this, "onUpdateIsReadyToInstall", { "eventObservable": true, "event": "chcp_updateIsReadyToInstall" }, arguments); };
    HotCodePushOriginal.prototype.onUpdateLoadFailed = function () { return cordova(this, "onUpdateLoadFailed", { "eventObservable": true, "event": "chcp_updateLoadFailed" }, arguments); };
    HotCodePushOriginal.prototype.onNothingToUpdate = function () { return cordova(this, "onNothingToUpdate", { "eventObservable": true, "event": "chcp_nothingToUpdate" }, arguments); };
    HotCodePushOriginal.prototype.onBeforeInstall = function () { return cordova(this, "onBeforeInstall", { "eventObservable": true, "event": "chcp_beforeInstall" }, arguments); };
    HotCodePushOriginal.prototype.onUpdateInstalled = function () { return cordova(this, "onUpdateInstalled", { "eventObservable": true, "event": "chcp_updateInstalled" }, arguments); };
    HotCodePushOriginal.prototype.onUpdateInstallFailed = function () { return cordova(this, "onUpdateInstallFailed", { "eventObservable": true, "event": "chcp_updateInstallFailed" }, arguments); };
    HotCodePushOriginal.prototype.onNothingToInstall = function () { return cordova(this, "onNothingToInstall", { "eventObservable": true, "event": "chcp_nothingToInstall" }, arguments); };
    HotCodePushOriginal.prototype.onBeforeAssetsInstalledOnExternalStorage = function () { return cordova(this, "onBeforeAssetsInstalledOnExternalStorage", { "eventObservable": true, "event": "chcp_beforeAssetsInstalledOnExternalStorage" }, arguments); };
    HotCodePushOriginal.prototype.onAssetsInstalledOnExternalStorage = function () { return cordova(this, "onAssetsInstalledOnExternalStorage", { "eventObservable": true, "event": "chcp_assetsInstalledOnExternalStorage" }, arguments); };
    HotCodePushOriginal.prototype.onAssetsInstallationError = function () { return cordova(this, "onAssetsInstallationError", { "eventObservable": true, "event": "chcp_assetsInstallationError" }, arguments); };
    HotCodePushOriginal.pluginName = "HotCodePush";
    HotCodePushOriginal.plugin = "cordova-hot-code-push";
    HotCodePushOriginal.pluginRef = "chcp";
    HotCodePushOriginal.repo = "https://github.com/nordnet/cordova-hot-code-push";
    HotCodePushOriginal.platforms = ["Android", "iOS"];
    return HotCodePushOriginal;
}(IonicNativePlugin));
var HotCodePush = new HotCodePushOriginal();
export { HotCodePush };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvQGlvbmljLW5hdGl2ZS9wbHVnaW5zL2hvdC1jb2RlLXB1c2gvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNBLE9BQU8saURBQW9ELE1BQU0sb0JBQW9CLENBQUM7QUFDdEYsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQWlEbEM7O0dBRUc7QUFDSCxNQUFNLENBQU4sSUFBWSxTQXNCWDtBQXRCRCxXQUFZLFNBQVM7SUFDbkIscUVBQXNCLENBQUE7SUFDdEIsbUVBQXFCLENBQUE7SUFDckIsNEdBQTBDLENBQUE7SUFDMUMsb0dBQXNDLENBQUE7SUFDdEMsd0dBQXdDLENBQUE7SUFDeEMsZ0dBQW9DLENBQUE7SUFDcEMsc0lBQXVELENBQUE7SUFDdkQsb0VBQXNCLENBQUE7SUFDdEIsc0hBQStDLENBQUE7SUFDL0Msa0dBQXFDLENBQUE7SUFDckMsNEhBQWtELENBQUE7SUFDbEQseUdBQXlDLENBQUE7SUFDekMsK0hBQW9ELENBQUE7SUFDcEQsMkdBQTBDLENBQUE7SUFDMUMsMkhBQWtELENBQUE7SUFDbEQsaUhBQTZDLENBQUE7SUFDN0MseUlBQXlELENBQUE7SUFDekQsbUdBQXNDLENBQUE7SUFDdEMsMkZBQWtDLENBQUE7SUFDbEMsdUdBQXdDLENBQUE7SUFDeEMscUdBQXVDLENBQUE7QUFDekMsQ0FBQyxFQXRCVyxTQUFTLEtBQVQsU0FBUyxRQXNCcEI7O0lBd0NnQywrQkFBaUI7Ozs7SUFPaEQsOENBQXdCLGFBQUMsT0FBZTtJQVV4QyxpQ0FBVyxhQUFDLE9BQW1DOzs7bURBQWdCO2dCQUM3RCxPQUFPLElBQUksT0FBTyxDQUFNLFVBQUMsT0FBTyxFQUFFLE1BQU07b0JBQ3RDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLENBQUMsVUFBQyxLQUF1QixFQUFFLElBQVM7d0JBQ3JFLElBQUksS0FBSyxFQUFFOzRCQUNULE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzt5QkFDZjs2QkFBTTs0QkFDTCxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7eUJBQ2Y7b0JBQ0gsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNkLENBQUMsQ0FBQyxDQUFDO2FBQ0o7OztJQVNELG1DQUFhO0lBV2Isc0RBQWdDO0lBV2hDLG9DQUFjO0lBWWQsOENBQXdCO0lBWXhCLHdDQUFrQjtJQVlsQix1Q0FBaUI7SUFZakIscUNBQWU7SUFZZix1Q0FBaUI7SUFZakIsMkNBQXFCO0lBWXJCLHdDQUFrQjtJQVlsQiw4REFBd0M7SUFZeEMsd0RBQWtDO0lBWWxDLCtDQUF5Qjs7Ozs7O3NCQXRTM0I7RUFvSGlDLGlCQUFpQjtTQUFyQyxXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29yZG92YSwgQ29yZG92YUNoZWNrLCBJb25pY05hdGl2ZVBsdWdpbiwgUGx1Z2luIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuZGVjbGFyZSB2YXIgY2hjcDogYW55O1xuXG5leHBvcnQgaW50ZXJmYWNlIEhvdENvZGVQdXNoVmVyc2lvbiB7XG4gIC8qKlxuICAgKiBBcHBsaWNhdGlvbidzIHZlcnNpb24gbmFtZS4gVGhpcyB2ZXJzaW9uIGlzIHZpc2libGUgdG8gdGhlIHVzZXIgb24gdGhlIHN0b3Jlcy5cbiAgICovXG4gIGFwcFZlcnNpb246IHN0cmluZztcbiAgLyoqXG4gICAqIEFwcGxpY2F0aW9uJ3MgYnVpbGQgdmVyc2lvbiBudW1iZXIuXG4gICAqL1xuICBidWlsZFZlcnNpb246IHN0cmluZztcbiAgLyoqXG4gICAqIFZlcnNpb24gb2YgdGhlIHdlYiBjb250ZW50LCB0aGF0IGlzIGRpc3BsYXllZCB0byB0aGUgdXNlci4gQmFzaWNhbGx5LCB2YWx1ZSBvZiB0aGUgcmVsZWFzZSBwcm9wZXJ0eSBmcm9tIGNoY3AuanNvbiBmaWxlIGluIHlvdXIgbG9jYWwgd3d3IGZvbGRlci5cbiAgICovXG4gIGN1cnJlbnRXZWJWZXJzaW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBQcmV2aW91cyB3ZWIgY29udGVudCB2ZXJzaW9uLiBUaGlzIGlzIGEgdmVyc2lvbiBvZiBvdXIgYmFja3VwLiBDYW4gYmUgZW1wdHksIGlmIHRoZXJlIHdlcmUgbm8gdXBkYXRlcyBpbnN0YWxsZWQuXG4gICAqL1xuICBwcmV2aW91c1dlYlZlcnNpb246IHN0cmluZztcbiAgLyoqXG4gICAqIFZlcnNpb24gbnVtYmVyIG9mIHRoZSB3ZWIgY29udGVudCwgdGhhdCB3YXMgbG9hZGVkIGJ5IHRoZSBwbHVnaW4gYW5kIHJlYWR5IHRvIGJlIGluc3RhbGxlZC4gQmFzaWNhbGx5LCB2YWx1ZSBvZiB0aGUgcmVsZWFzZSBwcm9wZXJ0eSBmcm9tIGNoY3AuanNvbiBmaWxlIG9uIHlvdXIgc2VydmVyLiBDYW4gYmUgZW1wdHksIGlmIG5vIHVwZGF0ZSBpcyB3YWl0aW5nIGZvciBpbnN0YWxsYXRpb24uXG4gICAqL1xuICByZWFkeVRvSW5zdGFsbFdlYlZlcnNpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIb3RDb2RlUHVzaFVwZGF0ZSB7XG4gIC8qKlxuICAgKiBDdXJyZW50IHZlcnNpb24gaW5zdGFsbGVkLlxuICAgKi9cbiAgY3VycmVudFZlcnNpb246IHN0cmluZztcbiAgLyoqXG4gICAqIEF2YWlsYWJsZSB2ZXJzaW9uIHRvIHJlcGxhY2UgdGhlIGN1cnJlbnQgb25lLlxuICAgKi9cbiAgcmVhZHlUb0luc3RhbGxWZXJzaW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG90Q29kZVB1c2hSZXF1ZXN0T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBVcmwgb2YgdGhlIGNoY3AuanNvbiBjb25maWcgb24gdGhlIHNlcnZlci4gUGx1Z2luIHdpbGwgdXNlIHRoaXMgb25lIGluc3RlYWQgb2YgPGNvbmZpZy1maWxlIHVybD1cIlwiPiBmcm9tIHRoZSBjb25maWcueG1sLlxuICAgKi9cbiAgJ2NvbmZpZy1maWxlJz86IHN0cmluZztcbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgSFRUUCBoZWFkZXJzLCB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gYWxsIHJlcXVlc3RzIGluIHVwZGF0ZSBkb3dubG9hZCBwcm9jZXNzLCBpbmNsdWRpbmcgbG9hZGluZyBjb25maWdzIGFuZCBuZXcvY2hhbmdlZCBmaWxlcy5cbiAgICovXG4gICdyZXF1ZXN0LWhlYWRlcnMnPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbn1cblxuLyoqXG4gKiBGb3IgZGVzY3JpcHRpb24gb24gZXJyb3IgY29kZXMsIHBsZWFzZSB2aXNpdCBodHRwczovL2dpdGh1Yi5jb20vbm9yZG5ldC9jb3Jkb3ZhLWhvdC1jb2RlLXB1c2gvd2lraS9FcnJvci1jb2Rlc1xuICovXG5leHBvcnQgZW51bSBFcnJvckNvZGUge1xuICBOT1RISU5HX1RPX0lOU1RBTEwgPSAxLFxuICBOT1RISU5HX1RPX1VQREFURSA9IDIsXG4gIEZBSUxFRF9UT19ET1dOTE9BRF9BUFBMSUNBVElPTl9DT05GSUcgPSAtMSxcbiAgQVBQTElDQVRJT05fQlVJTERfVkVSU0lPTl9UT09fTE9XID0gLTIsXG4gIEZBSUxFRF9UT19ET1dOTE9BRF9DT05URU5UX01BTklGRVNUID0gLTMsXG4gIEZBSUxFRF9UT19ET1dOTE9BRF9VUERBVEVfRklMRVMgPSAtNCxcbiAgRkFJTEVEX1RPX01PVkVfTE9BREVEX0ZJTEVTX1RPX0lOU1RBTExBVElPTl9GT0xERVIgPSAtNSxcbiAgVVBEQVRFX0lTX0lOVkFMSUQgPSAtNixcbiAgRkFJTEVEX1RPX0NPUFlfRklMRVNfRlJPTV9QUkVWSU9VU19SRUxFQVNFID0gLTcsXG4gIEZBSUxFRF9UT19DT1BZX05FV19DT05URU5UX0ZJTEVTID0gLTgsXG4gIExPQ0FMX1ZFUlNJT05fT0ZfQVBQTElDQVRJT05fQ09ORklHX05PVF9GT1VORCA9IC05LFxuICBMT0NBTF9WRVJTSU9OX09GX01BTklGRVNUX05PVF9GT1VORCA9IC0xMCxcbiAgTE9BREVEX1ZFUlNJT05fT0ZfQVBQTElDQVRJT05fQ09ORklHX05PVF9GT1VORCA9IC0xMSxcbiAgTE9BREVEX1ZFUlNJT05fT0ZfTUFOSUZFU1RfTk9UX0ZPVU5EID0gLTEyLFxuICBGQUlMRURfVE9fSU5TVEFMTF9BU1NFVFNfT05fRVhURVJOQUxfU1RPUkFHRSA9IC0xMyxcbiAgQ0FOVF9JTlNUQUxMX1dISUxFX0RPV05MT0FEX0lOX1BST0dSRVNTID0gLTE0LFxuICBDQU5UX0RPV05MT0FEX1VQREFURV9XSElMRV9JTlNUQUxMQVRJT05fSU5fUFJPR1JFU1MgPSAtMTUsXG4gIElOU1RBTExBVElPTl9BTFJFQURZX0lOX1BST0dSRVNTID0gLTE2LFxuICBET1dOTE9BRF9BTFJFQURZX0lOX1BST0dSRVNTID0gLTE3LFxuICBBU1NFVFNfRk9MREVSX0lTX05PVF9ZRVRfSU5TVEFMTEVEID0gLTE4LFxuICBORVdfQVBQTElDQVRJT05fQ09ORklHX0lTX0lOVkFMSUQgPSAtMTksXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG90Q29kZVB1c2hFcnJvciB7XG4gIGNvZGU6IEVycm9yQ29kZTtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIb3RDb2RlUHVzaEV2ZW50RGF0YSB7XG4gIGRldGFpbHM/OiB7XG4gICAgZXJyb3I/OiBIb3RDb2RlUHVzaEVycm9yO1xuICB9O1xufVxuXG4vKipcbiAqIEBuYW1lIEhvdCBDb2RlIFB1c2hcbiAqIEBkZXNjcmlwdGlvblxuICogSG90Q29kZVB1c2ggcGx1Z2luIGZvciBDb3Jkb3ZhIHRoYXQgc3VwcG9ydHMgaU9TIGFuZCBBbmRyb2lkLiBUaGlzIHBsdWdpbiBhbGxvd3MgeW91IHRvIGtlZXAgeW91ciBodG1sLCBjc3MgYW5kIGpzIGZpbGVzIHN5bmNlZCB3aXRoIHlvdXIgc2VydmVyLlxuICpcbiAqIEZvciBtb3JlIGluZm8sIHBsZWFzZSBzZWUgdGhlIGRldGFpbGVkIHdpa2kgaHR0cHM6Ly9naXRodWIuY29tL25vcmRuZXQvY29yZG92YS1ob3QtY29kZS1wdXNoL3dpa2lcbiAqXG4gKiBAdXNhZ2VcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IEhvdENvZGVQdXNoIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS9ob3QtY29kZS1wdXNoL25neCc7XG4gKlxuICogY29uc3RydWN0b3IocHJpdmF0ZSBob3RDb2RlUHVzaDogSG90Q29kZVB1c2gpIHsgfVxuICpcbiAqIC4uLlxuICpcbiAqIGhvdENvZGVQdXNoLmZldGNoVXBkYXRlKG9wdGlvbnMpLnRoZW4oZGF0YSA9PiB7IGNvbnNvbGUubG9nKCdVcGRhdGUgYXZhaWxhYmxlJyk7IH0pO1xuICpcbiAqIGBgYFxuICovXG5AUGx1Z2luKHtcbiAgcGx1Z2luTmFtZTogJ0hvdENvZGVQdXNoJyxcbiAgcGx1Z2luOiAnY29yZG92YS1ob3QtY29kZS1wdXNoJyxcbiAgcGx1Z2luUmVmOiAnY2hjcCcsXG4gIHJlcG86ICdodHRwczovL2dpdGh1Yi5jb20vbm9yZG5ldC9jb3Jkb3ZhLWhvdC1jb2RlLXB1c2gnLFxuICBwbGF0Zm9ybXM6IFsnQW5kcm9pZCcsICdpT1MnXSxcbn0pXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgSG90Q29kZVB1c2ggZXh0ZW5kcyBJb25pY05hdGl2ZVBsdWdpbiB7XG4gIC8qKlxuICAgKiBTaG93IGRpYWxvZyB3aXRoIHRoZSByZXF1ZXN0IHRvIHVwZGF0ZSBhcHBsaWNhdGlvbiB0aHJvdWdoIHRoZSBTdG9yZSAoQXBwIFN0b3JlIG9yIEdvb2dsZSBQbGF5KS5cbiAgICogQHBhcmFtIG1lc3NhZ2Uge3N0cmluZ30gTWVzc2FnZSB0byBzaG93IGluIHRoZSBkaWFsb2dcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0gUmVzb2x2ZXMgd2hlbiB0aGUgdXNlciBpcyByZWRpcmVjdGVkIHRvIHRoZSBzdG9yZSwgcmVqZWN0cyBpZiB0aGUgdXNlciBkZWNsaW5lcy5cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgcmVxdWVzdEFwcGxpY2F0aW9uVXBkYXRlKG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIERvd25sb2FkIHVwZGF0ZXMgZnJvbSB0aGUgc2VydmVyLXNpZGUuXG4gICAqIEBwYXJhbSBvcHRpb25zIHtIb3RDb2RlUHVzaFJlcXVlc3RPcHRpb25zfSBBZGRpdGlvbmFsIG9wdGlvbnMgdG8gdGhlIHJlcXVlc3QuIElmIG5vdCBzZXQgLSBwcmVmZXJlbmNlcyBmcm9tIGNvbmZpZy54bWwgYXJlIHVzZWQuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59IFJlc29sdmVzIGlmIHRoZXJlIGlzIGFuIHVwZGF0ZSBhdmFpbGFibGUsIHJlamVjdHMgb3RoZXJ3aXNlLlxuICAgKi9cbiAgQENvcmRvdmFDaGVjaygpXG4gIGZldGNoVXBkYXRlKG9wdGlvbnM/OiBIb3RDb2RlUHVzaFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBIb3RDb2RlUHVzaC5nZXRQbHVnaW4oKS5mZXRjaFVwZGF0ZSgoZXJyb3I6IEhvdENvZGVQdXNoRXJyb3IsIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0sIG9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc3RhbGwgdXBkYXRlIGlmIHRoZXJlIGlzIGFueXRoaW5nIHRvIGluc3RhbGwuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59IFJlc29sdmVzIHdoZW4gdGhlIHVwZGF0ZSBpcyBpbnN0YWxsZWQuXG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgY2FsbGJhY2tTdHlsZTogJ25vZGUnLFxuICB9KVxuICBpbnN0YWxsVXBkYXRlKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHVwZGF0ZSB3YXMgbG9hZGVkIGFuZCByZWFkeSB0byBiZSBpbnN0YWxsZWQuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEhvdENvZGVQdXNoVXBkYXRlPn0gUmVzb2x2ZXMgaWYgYW4gdXBkYXRlIGlzIHJlYWR5LCByZWplY3RzIGlmIHRoZXJlIGlzIG5vIHVwZGF0ZS5cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBjYWxsYmFja1N0eWxlOiAnbm9kZScsXG4gIH0pXG4gIGlzVXBkYXRlQXZhaWxhYmxlRm9ySW5zdGFsbGF0aW9uKCk6IFByb21pc2U8SG90Q29kZVB1c2hVcGRhdGU+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYXBwJ3MgdmVyc2lvbnMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEhvdENvZGVQdXNoVmVyc2lvbj59IFJlc29sdmVzIHdpdGggdGhlIGluZm9ybWF0aW9uIGFib3V0IHRoZSB2ZXJzaW9ucy5cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBjYWxsYmFja1N0eWxlOiAnbm9kZScsXG4gIH0pXG4gIGdldFZlcnNpb25JbmZvKCk6IFByb21pc2U8SG90Q29kZVB1c2hWZXJzaW9uPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IHNlbnQgd2hlbiBuZXcgcmVsZWFzZSB3YXMgc3VjY2Vzc2Z1bGx5IGxvYWRlZCBhbmQgcmVhZHkgdG8gYmUgaW5zdGFsbGVkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT59XG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgZXZlbnRPYnNlcnZhYmxlOiB0cnVlLFxuICAgIGV2ZW50OiAnY2hjcF91cGRhdGVJc1JlYWR5VG9JbnN0YWxsJyxcbiAgfSlcbiAgb25VcGRhdGVJc1JlYWR5VG9JbnN0YWxsKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIHBsdWdpbiBjb3VsZG4ndCBsb2FkIHVwZGF0ZSBmcm9tIHRoZSBzZXJ2ZXIuIEVycm9yIGRldGFpbHMgYXJlIGF0dGFjaGVkIHRvIHRoZSBldmVudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+fVxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGV2ZW50T2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBldmVudDogJ2NoY3BfdXBkYXRlTG9hZEZhaWxlZCcsXG4gIH0pXG4gIG9uVXBkYXRlTG9hZEZhaWxlZCgpOiBPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IHNlbnQgd2hlbiB3ZSBzdWNjZXNzZnVsbHkgbG9hZGVkIGFwcGxpY2F0aW9uIGNvbmZpZyBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCB0aGVyZSBpcyBub3RoaW5nIG5ldyBpcyBhdmFpbGFibGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPn1cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBldmVudE9ic2VydmFibGU6IHRydWUsXG4gICAgZXZlbnQ6ICdjaGNwX25vdGhpbmdUb1VwZGF0ZScsXG4gIH0pXG4gIG9uTm90aGluZ1RvVXBkYXRlKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIGFuIHVwZGF0ZSBpcyBhYm91dCB0byBiZSBpbnN0YWxsZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPn1cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBldmVudE9ic2VydmFibGU6IHRydWUsXG4gICAgZXZlbnQ6ICdjaGNwX2JlZm9yZUluc3RhbGwnLFxuICB9KVxuICBvbkJlZm9yZUluc3RhbGwoKTogT2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBzZW50IHdoZW4gdXBkYXRlIHdhcyBzdWNjZXNzZnVsbHkgaW5zdGFsbGVkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT59XG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgZXZlbnRPYnNlcnZhYmxlOiB0cnVlLFxuICAgIGV2ZW50OiAnY2hjcF91cGRhdGVJbnN0YWxsZWQnLFxuICB9KVxuICBvblVwZGF0ZUluc3RhbGxlZCgpOiBPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IHNlbnQgd2hlbiB1cGRhdGUgaW5zdGFsbGF0aW9uIGZhaWxlZC4gRXJyb3IgZGV0YWlscyBhcmUgYXR0YWNoZWQgdG8gdGhlIGV2ZW50LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT59XG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgZXZlbnRPYnNlcnZhYmxlOiB0cnVlLFxuICAgIGV2ZW50OiAnY2hjcF91cGRhdGVJbnN0YWxsRmFpbGVkJyxcbiAgfSlcbiAgb25VcGRhdGVJbnN0YWxsRmFpbGVkKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIHRoZXJlIGlzIG5vdGhpbmcgdG8gaW5zdGFsbC4gUHJvYmFibHksIG5vdGhpbmcgd2FzIGxvYWRlZCBiZWZvcmUgdGhhdC5cbiAgICogQHJldHVybnMge09ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+fVxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGV2ZW50T2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBldmVudDogJ2NoY3Bfbm90aGluZ1RvSW5zdGFsbCcsXG4gIH0pXG4gIG9uTm90aGluZ1RvSW5zdGFsbCgpOiBPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IHNlbnQgd2hlbiBwbHVnaW4gaXMgYWJvdXQgdG8gc3RhcnQgaW5zdGFsbGluZyBidW5kbGUgY29udGVudCBvbiB0aGUgZXh0ZXJuYWwgc3RvcmFnZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+fVxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGV2ZW50T2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBldmVudDogJ2NoY3BfYmVmb3JlQXNzZXRzSW5zdGFsbGVkT25FeHRlcm5hbFN0b3JhZ2UnLFxuICB9KVxuICBvbkJlZm9yZUFzc2V0c0luc3RhbGxlZE9uRXh0ZXJuYWxTdG9yYWdlKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIHBsdWdpbiBzdWNjZXNzZnVsbHkgY29waWVkIHdlYiBwcm9qZWN0IGZpbGVzIGZyb20gYnVuZGxlIG9uIHRoZSBleHRlcm5hbCBzdG9yYWdlLiBNb3N0IGxpa2VseSB5b3Ugd2lsbCB1c2UgaXQgZm9yIGRlYnVnIHB1cnBvc2Ugb25seS4gT3IgZXZlbiBuZXZlci5cbiAgICogQHJldHVybnMge09ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+fVxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGV2ZW50T2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBldmVudDogJ2NoY3BfYXNzZXRzSW5zdGFsbGVkT25FeHRlcm5hbFN0b3JhZ2UnLFxuICB9KVxuICBvbkFzc2V0c0luc3RhbGxlZE9uRXh0ZXJuYWxTdG9yYWdlKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIHBsdWdpbiBjb3VsZG4ndCBjb3B5IGZpbGVzIGZyb20gYnVuZGxlIG9uIHRoZSBleHRlcm5hbCBzdG9yYWdlLiBJZiB0aGlzIGhhcHBlbnMgLSBwbHVnaW4gd29uJ3Qgd29yay4gQ2FuIG9jY3VyIHdoZW4gdGhlcmUgaXMgbm90IGVub3VnaCBmcmVlIHNwYWNlIG9uIHRoZSBkZXZpY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPn1cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBldmVudE9ic2VydmFibGU6IHRydWUsXG4gICAgZXZlbnQ6ICdjaGNwX2Fzc2V0c0luc3RhbGxhdGlvbkVycm9yJyxcbiAgfSlcbiAgb25Bc3NldHNJbnN0YWxsYXRpb25FcnJvcigpOiBPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPiB7XG4gICAgcmV0dXJuO1xuICB9XG59XG4iXX0=