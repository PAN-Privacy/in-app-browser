import { __extends } from "tslib";
import { Injectable } from '@angular/core';
import { IonicNativePlugin, checkAvailability, cordova } from '@ionic-native/core';
import { Observable } from 'rxjs';
/**
 * For description on error codes, please visit https://github.com/nordnet/cordova-hot-code-push/wiki/Error-codes
 */
export var ErrorCode;
(function (ErrorCode) {
    ErrorCode[ErrorCode["NOTHING_TO_INSTALL"] = 1] = "NOTHING_TO_INSTALL";
    ErrorCode[ErrorCode["NOTHING_TO_UPDATE"] = 2] = "NOTHING_TO_UPDATE";
    ErrorCode[ErrorCode["FAILED_TO_DOWNLOAD_APPLICATION_CONFIG"] = -1] = "FAILED_TO_DOWNLOAD_APPLICATION_CONFIG";
    ErrorCode[ErrorCode["APPLICATION_BUILD_VERSION_TOO_LOW"] = -2] = "APPLICATION_BUILD_VERSION_TOO_LOW";
    ErrorCode[ErrorCode["FAILED_TO_DOWNLOAD_CONTENT_MANIFEST"] = -3] = "FAILED_TO_DOWNLOAD_CONTENT_MANIFEST";
    ErrorCode[ErrorCode["FAILED_TO_DOWNLOAD_UPDATE_FILES"] = -4] = "FAILED_TO_DOWNLOAD_UPDATE_FILES";
    ErrorCode[ErrorCode["FAILED_TO_MOVE_LOADED_FILES_TO_INSTALLATION_FOLDER"] = -5] = "FAILED_TO_MOVE_LOADED_FILES_TO_INSTALLATION_FOLDER";
    ErrorCode[ErrorCode["UPDATE_IS_INVALID"] = -6] = "UPDATE_IS_INVALID";
    ErrorCode[ErrorCode["FAILED_TO_COPY_FILES_FROM_PREVIOUS_RELEASE"] = -7] = "FAILED_TO_COPY_FILES_FROM_PREVIOUS_RELEASE";
    ErrorCode[ErrorCode["FAILED_TO_COPY_NEW_CONTENT_FILES"] = -8] = "FAILED_TO_COPY_NEW_CONTENT_FILES";
    ErrorCode[ErrorCode["LOCAL_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND"] = -9] = "LOCAL_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND";
    ErrorCode[ErrorCode["LOCAL_VERSION_OF_MANIFEST_NOT_FOUND"] = -10] = "LOCAL_VERSION_OF_MANIFEST_NOT_FOUND";
    ErrorCode[ErrorCode["LOADED_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND"] = -11] = "LOADED_VERSION_OF_APPLICATION_CONFIG_NOT_FOUND";
    ErrorCode[ErrorCode["LOADED_VERSION_OF_MANIFEST_NOT_FOUND"] = -12] = "LOADED_VERSION_OF_MANIFEST_NOT_FOUND";
    ErrorCode[ErrorCode["FAILED_TO_INSTALL_ASSETS_ON_EXTERNAL_STORAGE"] = -13] = "FAILED_TO_INSTALL_ASSETS_ON_EXTERNAL_STORAGE";
    ErrorCode[ErrorCode["CANT_INSTALL_WHILE_DOWNLOAD_IN_PROGRESS"] = -14] = "CANT_INSTALL_WHILE_DOWNLOAD_IN_PROGRESS";
    ErrorCode[ErrorCode["CANT_DOWNLOAD_UPDATE_WHILE_INSTALLATION_IN_PROGRESS"] = -15] = "CANT_DOWNLOAD_UPDATE_WHILE_INSTALLATION_IN_PROGRESS";
    ErrorCode[ErrorCode["INSTALLATION_ALREADY_IN_PROGRESS"] = -16] = "INSTALLATION_ALREADY_IN_PROGRESS";
    ErrorCode[ErrorCode["DOWNLOAD_ALREADY_IN_PROGRESS"] = -17] = "DOWNLOAD_ALREADY_IN_PROGRESS";
    ErrorCode[ErrorCode["ASSETS_FOLDER_IS_NOT_YET_INSTALLED"] = -18] = "ASSETS_FOLDER_IS_NOT_YET_INSTALLED";
    ErrorCode[ErrorCode["NEW_APPLICATION_CONFIG_IS_INVALID"] = -19] = "NEW_APPLICATION_CONFIG_IS_INVALID";
})(ErrorCode || (ErrorCode = {}));
var HotCodePush = /** @class */ (function (_super) {
    __extends(HotCodePush, _super);
    function HotCodePush() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HotCodePush.prototype.requestApplicationUpdate = function (message) { return cordova(this, "requestApplicationUpdate", {}, arguments); };
    HotCodePush.prototype.fetchUpdate = function (options) {
        var _this = this;
        return (function () {
            if (checkAvailability(_this) === true) {
                return new Promise(function (resolve, reject) {
                    HotCodePush.getPlugin().fetchUpdate(function (error, data) {
                        if (error) {
                            reject(error);
                        }
                        else {
                            resolve(data);
                        }
                    }, options);
                });
            }
        })();
    };
    HotCodePush.prototype.installUpdate = function () { return cordova(this, "installUpdate", { "callbackStyle": "node" }, arguments); };
    HotCodePush.prototype.isUpdateAvailableForInstallation = function () { return cordova(this, "isUpdateAvailableForInstallation", { "callbackStyle": "node" }, arguments); };
    HotCodePush.prototype.getVersionInfo = function () { return cordova(this, "getVersionInfo", { "callbackStyle": "node" }, arguments); };
    HotCodePush.prototype.onUpdateIsReadyToInstall = function () { return cordova(this, "onUpdateIsReadyToInstall", { "eventObservable": true, "event": "chcp_updateIsReadyToInstall" }, arguments); };
    HotCodePush.prototype.onUpdateLoadFailed = function () { return cordova(this, "onUpdateLoadFailed", { "eventObservable": true, "event": "chcp_updateLoadFailed" }, arguments); };
    HotCodePush.prototype.onNothingToUpdate = function () { return cordova(this, "onNothingToUpdate", { "eventObservable": true, "event": "chcp_nothingToUpdate" }, arguments); };
    HotCodePush.prototype.onBeforeInstall = function () { return cordova(this, "onBeforeInstall", { "eventObservable": true, "event": "chcp_beforeInstall" }, arguments); };
    HotCodePush.prototype.onUpdateInstalled = function () { return cordova(this, "onUpdateInstalled", { "eventObservable": true, "event": "chcp_updateInstalled" }, arguments); };
    HotCodePush.prototype.onUpdateInstallFailed = function () { return cordova(this, "onUpdateInstallFailed", { "eventObservable": true, "event": "chcp_updateInstallFailed" }, arguments); };
    HotCodePush.prototype.onNothingToInstall = function () { return cordova(this, "onNothingToInstall", { "eventObservable": true, "event": "chcp_nothingToInstall" }, arguments); };
    HotCodePush.prototype.onBeforeAssetsInstalledOnExternalStorage = function () { return cordova(this, "onBeforeAssetsInstalledOnExternalStorage", { "eventObservable": true, "event": "chcp_beforeAssetsInstalledOnExternalStorage" }, arguments); };
    HotCodePush.prototype.onAssetsInstalledOnExternalStorage = function () { return cordova(this, "onAssetsInstalledOnExternalStorage", { "eventObservable": true, "event": "chcp_assetsInstalledOnExternalStorage" }, arguments); };
    HotCodePush.prototype.onAssetsInstallationError = function () { return cordova(this, "onAssetsInstallationError", { "eventObservable": true, "event": "chcp_assetsInstallationError" }, arguments); };
    HotCodePush.pluginName = "HotCodePush";
    HotCodePush.plugin = "cordova-hot-code-push";
    HotCodePush.pluginRef = "chcp";
    HotCodePush.repo = "https://github.com/nordnet/cordova-hot-code-push";
    HotCodePush.platforms = ["Android", "iOS"];
    HotCodePush.decorators = [
        { type: Injectable }
    ];
    return HotCodePush;
}(IonicNativePlugin));
export { HotCodePush };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvQGlvbmljLW5hdGl2ZS9wbHVnaW5zL2hvdC1jb2RlLXB1c2gvbmd4L2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8saURBQW9ELE1BQU0sb0JBQW9CLENBQUM7QUFDdEYsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQWlEbEM7O0dBRUc7QUFDSCxNQUFNLENBQU4sSUFBWSxTQXNCWDtBQXRCRCxXQUFZLFNBQVM7SUFDbkIscUVBQXNCLENBQUE7SUFDdEIsbUVBQXFCLENBQUE7SUFDckIsNEdBQTBDLENBQUE7SUFDMUMsb0dBQXNDLENBQUE7SUFDdEMsd0dBQXdDLENBQUE7SUFDeEMsZ0dBQW9DLENBQUE7SUFDcEMsc0lBQXVELENBQUE7SUFDdkQsb0VBQXNCLENBQUE7SUFDdEIsc0hBQStDLENBQUE7SUFDL0Msa0dBQXFDLENBQUE7SUFDckMsNEhBQWtELENBQUE7SUFDbEQseUdBQXlDLENBQUE7SUFDekMsK0hBQW9ELENBQUE7SUFDcEQsMkdBQTBDLENBQUE7SUFDMUMsMkhBQWtELENBQUE7SUFDbEQsaUhBQTZDLENBQUE7SUFDN0MseUlBQXlELENBQUE7SUFDekQsbUdBQXNDLENBQUE7SUFDdEMsMkZBQWtDLENBQUE7SUFDbEMsdUdBQXdDLENBQUE7SUFDeEMscUdBQXVDLENBQUE7QUFDekMsQ0FBQyxFQXRCVyxTQUFTLEtBQVQsU0FBUyxRQXNCcEI7O0lBd0NnQywrQkFBaUI7Ozs7SUFPaEQsOENBQXdCLGFBQUMsT0FBZTtJQVV4QyxpQ0FBVyxhQUFDLE9BQW1DOzs7bURBQWdCO2dCQUM3RCxPQUFPLElBQUksT0FBTyxDQUFNLFVBQUMsT0FBTyxFQUFFLE1BQU07b0JBQ3RDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLENBQUMsVUFBQyxLQUF1QixFQUFFLElBQVM7d0JBQ3JFLElBQUksS0FBSyxFQUFFOzRCQUNULE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzt5QkFDZjs2QkFBTTs0QkFDTCxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7eUJBQ2Y7b0JBQ0gsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNkLENBQUMsQ0FBQyxDQUFDO2FBQ0o7OztJQVNELG1DQUFhO0lBV2Isc0RBQWdDO0lBV2hDLG9DQUFjO0lBWWQsOENBQXdCO0lBWXhCLHdDQUFrQjtJQVlsQix1Q0FBaUI7SUFZakIscUNBQWU7SUFZZix1Q0FBaUI7SUFZakIsMkNBQXFCO0lBWXJCLHdDQUFrQjtJQVlsQiw4REFBd0M7SUFZeEMsd0RBQWtDO0lBWWxDLCtDQUF5Qjs7Ozs7OztnQkFuTDFCLFVBQVU7O3NCQW5IWDtFQW9IaUMsaUJBQWlCO1NBQXJDLFdBQVciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb3Jkb3ZhLCBDb3Jkb3ZhQ2hlY2ssIElvbmljTmF0aXZlUGx1Z2luLCBQbHVnaW4gfSBmcm9tICdAaW9uaWMtbmF0aXZlL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5kZWNsYXJlIHZhciBjaGNwOiBhbnk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG90Q29kZVB1c2hWZXJzaW9uIHtcbiAgLyoqXG4gICAqIEFwcGxpY2F0aW9uJ3MgdmVyc2lvbiBuYW1lLiBUaGlzIHZlcnNpb24gaXMgdmlzaWJsZSB0byB0aGUgdXNlciBvbiB0aGUgc3RvcmVzLlxuICAgKi9cbiAgYXBwVmVyc2lvbjogc3RyaW5nO1xuICAvKipcbiAgICogQXBwbGljYXRpb24ncyBidWlsZCB2ZXJzaW9uIG51bWJlci5cbiAgICovXG4gIGJ1aWxkVmVyc2lvbjogc3RyaW5nO1xuICAvKipcbiAgICogVmVyc2lvbiBvZiB0aGUgd2ViIGNvbnRlbnQsIHRoYXQgaXMgZGlzcGxheWVkIHRvIHRoZSB1c2VyLiBCYXNpY2FsbHksIHZhbHVlIG9mIHRoZSByZWxlYXNlIHByb3BlcnR5IGZyb20gY2hjcC5qc29uIGZpbGUgaW4geW91ciBsb2NhbCB3d3cgZm9sZGVyLlxuICAgKi9cbiAgY3VycmVudFdlYlZlcnNpb246IHN0cmluZztcbiAgLyoqXG4gICAqIFByZXZpb3VzIHdlYiBjb250ZW50IHZlcnNpb24uIFRoaXMgaXMgYSB2ZXJzaW9uIG9mIG91ciBiYWNrdXAuIENhbiBiZSBlbXB0eSwgaWYgdGhlcmUgd2VyZSBubyB1cGRhdGVzIGluc3RhbGxlZC5cbiAgICovXG4gIHByZXZpb3VzV2ViVmVyc2lvbjogc3RyaW5nO1xuICAvKipcbiAgICogVmVyc2lvbiBudW1iZXIgb2YgdGhlIHdlYiBjb250ZW50LCB0aGF0IHdhcyBsb2FkZWQgYnkgdGhlIHBsdWdpbiBhbmQgcmVhZHkgdG8gYmUgaW5zdGFsbGVkLiBCYXNpY2FsbHksIHZhbHVlIG9mIHRoZSByZWxlYXNlIHByb3BlcnR5IGZyb20gY2hjcC5qc29uIGZpbGUgb24geW91ciBzZXJ2ZXIuIENhbiBiZSBlbXB0eSwgaWYgbm8gdXBkYXRlIGlzIHdhaXRpbmcgZm9yIGluc3RhbGxhdGlvbi5cbiAgICovXG4gIHJlYWR5VG9JbnN0YWxsV2ViVmVyc2lvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhvdENvZGVQdXNoVXBkYXRlIHtcbiAgLyoqXG4gICAqIEN1cnJlbnQgdmVyc2lvbiBpbnN0YWxsZWQuXG4gICAqL1xuICBjdXJyZW50VmVyc2lvbjogc3RyaW5nO1xuICAvKipcbiAgICogQXZhaWxhYmxlIHZlcnNpb24gdG8gcmVwbGFjZSB0aGUgY3VycmVudCBvbmUuXG4gICAqL1xuICByZWFkeVRvSW5zdGFsbFZlcnNpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIb3RDb2RlUHVzaFJlcXVlc3RPcHRpb25zIHtcbiAgLyoqXG4gICAqIFVybCBvZiB0aGUgY2hjcC5qc29uIGNvbmZpZyBvbiB0aGUgc2VydmVyLiBQbHVnaW4gd2lsbCB1c2UgdGhpcyBvbmUgaW5zdGVhZCBvZiA8Y29uZmlnLWZpbGUgdXJsPVwiXCI+IGZyb20gdGhlIGNvbmZpZy54bWwuXG4gICAqL1xuICAnY29uZmlnLWZpbGUnPzogc3RyaW5nO1xuICAvKipcbiAgICogQWRkaXRpb25hbCBIVFRQIGhlYWRlcnMsIHRoYXQgd2lsbCBiZSBhZGRlZCB0byBhbGwgcmVxdWVzdHMgaW4gdXBkYXRlIGRvd25sb2FkIHByb2Nlc3MsIGluY2x1ZGluZyBsb2FkaW5nIGNvbmZpZ3MgYW5kIG5ldy9jaGFuZ2VkIGZpbGVzLlxuICAgKi9cbiAgJ3JlcXVlc3QtaGVhZGVycyc/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xufVxuXG4vKipcbiAqIEZvciBkZXNjcmlwdGlvbiBvbiBlcnJvciBjb2RlcywgcGxlYXNlIHZpc2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9ub3JkbmV0L2NvcmRvdmEtaG90LWNvZGUtcHVzaC93aWtpL0Vycm9yLWNvZGVzXG4gKi9cbmV4cG9ydCBlbnVtIEVycm9yQ29kZSB7XG4gIE5PVEhJTkdfVE9fSU5TVEFMTCA9IDEsXG4gIE5PVEhJTkdfVE9fVVBEQVRFID0gMixcbiAgRkFJTEVEX1RPX0RPV05MT0FEX0FQUExJQ0FUSU9OX0NPTkZJRyA9IC0xLFxuICBBUFBMSUNBVElPTl9CVUlMRF9WRVJTSU9OX1RPT19MT1cgPSAtMixcbiAgRkFJTEVEX1RPX0RPV05MT0FEX0NPTlRFTlRfTUFOSUZFU1QgPSAtMyxcbiAgRkFJTEVEX1RPX0RPV05MT0FEX1VQREFURV9GSUxFUyA9IC00LFxuICBGQUlMRURfVE9fTU9WRV9MT0FERURfRklMRVNfVE9fSU5TVEFMTEFUSU9OX0ZPTERFUiA9IC01LFxuICBVUERBVEVfSVNfSU5WQUxJRCA9IC02LFxuICBGQUlMRURfVE9fQ09QWV9GSUxFU19GUk9NX1BSRVZJT1VTX1JFTEVBU0UgPSAtNyxcbiAgRkFJTEVEX1RPX0NPUFlfTkVXX0NPTlRFTlRfRklMRVMgPSAtOCxcbiAgTE9DQUxfVkVSU0lPTl9PRl9BUFBMSUNBVElPTl9DT05GSUdfTk9UX0ZPVU5EID0gLTksXG4gIExPQ0FMX1ZFUlNJT05fT0ZfTUFOSUZFU1RfTk9UX0ZPVU5EID0gLTEwLFxuICBMT0FERURfVkVSU0lPTl9PRl9BUFBMSUNBVElPTl9DT05GSUdfTk9UX0ZPVU5EID0gLTExLFxuICBMT0FERURfVkVSU0lPTl9PRl9NQU5JRkVTVF9OT1RfRk9VTkQgPSAtMTIsXG4gIEZBSUxFRF9UT19JTlNUQUxMX0FTU0VUU19PTl9FWFRFUk5BTF9TVE9SQUdFID0gLTEzLFxuICBDQU5UX0lOU1RBTExfV0hJTEVfRE9XTkxPQURfSU5fUFJPR1JFU1MgPSAtMTQsXG4gIENBTlRfRE9XTkxPQURfVVBEQVRFX1dISUxFX0lOU1RBTExBVElPTl9JTl9QUk9HUkVTUyA9IC0xNSxcbiAgSU5TVEFMTEFUSU9OX0FMUkVBRFlfSU5fUFJPR1JFU1MgPSAtMTYsXG4gIERPV05MT0FEX0FMUkVBRFlfSU5fUFJPR1JFU1MgPSAtMTcsXG4gIEFTU0VUU19GT0xERVJfSVNfTk9UX1lFVF9JTlNUQUxMRUQgPSAtMTgsXG4gIE5FV19BUFBMSUNBVElPTl9DT05GSUdfSVNfSU5WQUxJRCA9IC0xOSxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIb3RDb2RlUHVzaEVycm9yIHtcbiAgY29kZTogRXJyb3JDb2RlO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhvdENvZGVQdXNoRXZlbnREYXRhIHtcbiAgZGV0YWlscz86IHtcbiAgICBlcnJvcj86IEhvdENvZGVQdXNoRXJyb3I7XG4gIH07XG59XG5cbi8qKlxuICogQG5hbWUgSG90IENvZGUgUHVzaFxuICogQGRlc2NyaXB0aW9uXG4gKiBIb3RDb2RlUHVzaCBwbHVnaW4gZm9yIENvcmRvdmEgdGhhdCBzdXBwb3J0cyBpT1MgYW5kIEFuZHJvaWQuIFRoaXMgcGx1Z2luIGFsbG93cyB5b3UgdG8ga2VlcCB5b3VyIGh0bWwsIGNzcyBhbmQganMgZmlsZXMgc3luY2VkIHdpdGggeW91ciBzZXJ2ZXIuXG4gKlxuICogRm9yIG1vcmUgaW5mbywgcGxlYXNlIHNlZSB0aGUgZGV0YWlsZWQgd2lraSBodHRwczovL2dpdGh1Yi5jb20vbm9yZG5ldC9jb3Jkb3ZhLWhvdC1jb2RlLXB1c2gvd2lraVxuICpcbiAqIEB1c2FnZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgSG90Q29kZVB1c2ggfSBmcm9tICdAaW9uaWMtbmF0aXZlL2hvdC1jb2RlLXB1c2gvbmd4JztcbiAqXG4gKiBjb25zdHJ1Y3Rvcihwcml2YXRlIGhvdENvZGVQdXNoOiBIb3RDb2RlUHVzaCkgeyB9XG4gKlxuICogLi4uXG4gKlxuICogaG90Q29kZVB1c2guZmV0Y2hVcGRhdGUob3B0aW9ucykudGhlbihkYXRhID0+IHsgY29uc29sZS5sb2coJ1VwZGF0ZSBhdmFpbGFibGUnKTsgfSk7XG4gKlxuICogYGBgXG4gKi9cbkBQbHVnaW4oe1xuICBwbHVnaW5OYW1lOiAnSG90Q29kZVB1c2gnLFxuICBwbHVnaW46ICdjb3Jkb3ZhLWhvdC1jb2RlLXB1c2gnLFxuICBwbHVnaW5SZWY6ICdjaGNwJyxcbiAgcmVwbzogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ub3JkbmV0L2NvcmRvdmEtaG90LWNvZGUtcHVzaCcsXG4gIHBsYXRmb3JtczogWydBbmRyb2lkJywgJ2lPUyddLFxufSlcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBIb3RDb2RlUHVzaCBleHRlbmRzIElvbmljTmF0aXZlUGx1Z2luIHtcbiAgLyoqXG4gICAqIFNob3cgZGlhbG9nIHdpdGggdGhlIHJlcXVlc3QgdG8gdXBkYXRlIGFwcGxpY2F0aW9uIHRocm91Z2ggdGhlIFN0b3JlIChBcHAgU3RvcmUgb3IgR29vZ2xlIFBsYXkpLlxuICAgKiBAcGFyYW0gbWVzc2FnZSB7c3RyaW5nfSBNZXNzYWdlIHRvIHNob3cgaW4gdGhlIGRpYWxvZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fSBSZXNvbHZlcyB3aGVuIHRoZSB1c2VyIGlzIHJlZGlyZWN0ZWQgdG8gdGhlIHN0b3JlLCByZWplY3RzIGlmIHRoZSB1c2VyIGRlY2xpbmVzLlxuICAgKi9cbiAgQENvcmRvdmEoKVxuICByZXF1ZXN0QXBwbGljYXRpb25VcGRhdGUobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRG93bmxvYWQgdXBkYXRlcyBmcm9tIHRoZSBzZXJ2ZXItc2lkZS5cbiAgICogQHBhcmFtIG9wdGlvbnMge0hvdENvZGVQdXNoUmVxdWVzdE9wdGlvbnN9IEFkZGl0aW9uYWwgb3B0aW9ucyB0byB0aGUgcmVxdWVzdC4gSWYgbm90IHNldCAtIHByZWZlcmVuY2VzIGZyb20gY29uZmlnLnhtbCBhcmUgdXNlZC5cbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0gUmVzb2x2ZXMgaWYgdGhlcmUgaXMgYW4gdXBkYXRlIGF2YWlsYWJsZSwgcmVqZWN0cyBvdGhlcndpc2UuXG4gICAqL1xuICBAQ29yZG92YUNoZWNrKClcbiAgZmV0Y2hVcGRhdGUob3B0aW9ucz86IEhvdENvZGVQdXNoUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIEhvdENvZGVQdXNoLmdldFBsdWdpbigpLmZldGNoVXBkYXRlKChlcnJvcjogSG90Q29kZVB1c2hFcnJvciwgZGF0YTogYW55KSA9PiB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5zdGFsbCB1cGRhdGUgaWYgdGhlcmUgaXMgYW55dGhpbmcgdG8gaW5zdGFsbC5cbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0gUmVzb2x2ZXMgd2hlbiB0aGUgdXBkYXRlIGlzIGluc3RhbGxlZC5cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBjYWxsYmFja1N0eWxlOiAnbm9kZScsXG4gIH0pXG4gIGluc3RhbGxVcGRhdGUoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdXBkYXRlIHdhcyBsb2FkZWQgYW5kIHJlYWR5IHRvIGJlIGluc3RhbGxlZC5cbiAgICogQHJldHVybnMge1Byb21pc2U8SG90Q29kZVB1c2hVcGRhdGU+fSBSZXNvbHZlcyBpZiBhbiB1cGRhdGUgaXMgcmVhZHksIHJlamVjdHMgaWYgdGhlcmUgaXMgbm8gdXBkYXRlLlxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGNhbGxiYWNrU3R5bGU6ICdub2RlJyxcbiAgfSlcbiAgaXNVcGRhdGVBdmFpbGFibGVGb3JJbnN0YWxsYXRpb24oKTogUHJvbWlzZTxIb3RDb2RlUHVzaFVwZGF0ZT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhcHAncyB2ZXJzaW9ucy5cbiAgICogQHJldHVybnMge1Byb21pc2U8SG90Q29kZVB1c2hWZXJzaW9uPn0gUmVzb2x2ZXMgd2l0aCB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHZlcnNpb25zLlxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGNhbGxiYWNrU3R5bGU6ICdub2RlJyxcbiAgfSlcbiAgZ2V0VmVyc2lvbkluZm8oKTogUHJvbWlzZTxIb3RDb2RlUHVzaFZlcnNpb24+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIG5ldyByZWxlYXNlIHdhcyBzdWNjZXNzZnVsbHkgbG9hZGVkIGFuZCByZWFkeSB0byBiZSBpbnN0YWxsZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPn1cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBldmVudE9ic2VydmFibGU6IHRydWUsXG4gICAgZXZlbnQ6ICdjaGNwX3VwZGF0ZUlzUmVhZHlUb0luc3RhbGwnLFxuICB9KVxuICBvblVwZGF0ZUlzUmVhZHlUb0luc3RhbGwoKTogT2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBzZW50IHdoZW4gcGx1Z2luIGNvdWxkbid0IGxvYWQgdXBkYXRlIGZyb20gdGhlIHNlcnZlci4gRXJyb3IgZGV0YWlscyBhcmUgYXR0YWNoZWQgdG8gdGhlIGV2ZW50LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT59XG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgZXZlbnRPYnNlcnZhYmxlOiB0cnVlLFxuICAgIGV2ZW50OiAnY2hjcF91cGRhdGVMb2FkRmFpbGVkJyxcbiAgfSlcbiAgb25VcGRhdGVMb2FkRmFpbGVkKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIHdlIHN1Y2Nlc3NmdWxseSBsb2FkZWQgYXBwbGljYXRpb24gY29uZmlnIGZyb20gdGhlIHNlcnZlciwgYnV0IHRoZXJlIGlzIG5vdGhpbmcgbmV3IGlzIGF2YWlsYWJsZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+fVxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGV2ZW50T2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBldmVudDogJ2NoY3Bfbm90aGluZ1RvVXBkYXRlJyxcbiAgfSlcbiAgb25Ob3RoaW5nVG9VcGRhdGUoKTogT2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBzZW50IHdoZW4gYW4gdXBkYXRlIGlzIGFib3V0IHRvIGJlIGluc3RhbGxlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+fVxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGV2ZW50T2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBldmVudDogJ2NoY3BfYmVmb3JlSW5zdGFsbCcsXG4gIH0pXG4gIG9uQmVmb3JlSW5zdGFsbCgpOiBPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IHNlbnQgd2hlbiB1cGRhdGUgd2FzIHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPn1cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBldmVudE9ic2VydmFibGU6IHRydWUsXG4gICAgZXZlbnQ6ICdjaGNwX3VwZGF0ZUluc3RhbGxlZCcsXG4gIH0pXG4gIG9uVXBkYXRlSW5zdGFsbGVkKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIHVwZGF0ZSBpbnN0YWxsYXRpb24gZmFpbGVkLiBFcnJvciBkZXRhaWxzIGFyZSBhdHRhY2hlZCB0byB0aGUgZXZlbnQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPEhvdENvZGVQdXNoRXZlbnREYXRhPn1cbiAgICovXG4gIEBDb3Jkb3ZhKHtcbiAgICBldmVudE9ic2VydmFibGU6IHRydWUsXG4gICAgZXZlbnQ6ICdjaGNwX3VwZGF0ZUluc3RhbGxGYWlsZWQnLFxuICB9KVxuICBvblVwZGF0ZUluc3RhbGxGYWlsZWQoKTogT2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBzZW50IHdoZW4gdGhlcmUgaXMgbm90aGluZyB0byBpbnN0YWxsLiBQcm9iYWJseSwgbm90aGluZyB3YXMgbG9hZGVkIGJlZm9yZSB0aGF0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT59XG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgZXZlbnRPYnNlcnZhYmxlOiB0cnVlLFxuICAgIGV2ZW50OiAnY2hjcF9ub3RoaW5nVG9JbnN0YWxsJyxcbiAgfSlcbiAgb25Ob3RoaW5nVG9JbnN0YWxsKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgc2VudCB3aGVuIHBsdWdpbiBpcyBhYm91dCB0byBzdGFydCBpbnN0YWxsaW5nIGJ1bmRsZSBjb250ZW50IG9uIHRoZSBleHRlcm5hbCBzdG9yYWdlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT59XG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgZXZlbnRPYnNlcnZhYmxlOiB0cnVlLFxuICAgIGV2ZW50OiAnY2hjcF9iZWZvcmVBc3NldHNJbnN0YWxsZWRPbkV4dGVybmFsU3RvcmFnZScsXG4gIH0pXG4gIG9uQmVmb3JlQXNzZXRzSW5zdGFsbGVkT25FeHRlcm5hbFN0b3JhZ2UoKTogT2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBzZW50IHdoZW4gcGx1Z2luIHN1Y2Nlc3NmdWxseSBjb3BpZWQgd2ViIHByb2plY3QgZmlsZXMgZnJvbSBidW5kbGUgb24gdGhlIGV4dGVybmFsIHN0b3JhZ2UuIE1vc3QgbGlrZWx5IHlvdSB3aWxsIHVzZSBpdCBmb3IgZGVidWcgcHVycG9zZSBvbmx5LiBPciBldmVuIG5ldmVyLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT59XG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgZXZlbnRPYnNlcnZhYmxlOiB0cnVlLFxuICAgIGV2ZW50OiAnY2hjcF9hc3NldHNJbnN0YWxsZWRPbkV4dGVybmFsU3RvcmFnZScsXG4gIH0pXG4gIG9uQXNzZXRzSW5zdGFsbGVkT25FeHRlcm5hbFN0b3JhZ2UoKTogT2JzZXJ2YWJsZTxIb3RDb2RlUHVzaEV2ZW50RGF0YT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBzZW50IHdoZW4gcGx1Z2luIGNvdWxkbid0IGNvcHkgZmlsZXMgZnJvbSBidW5kbGUgb24gdGhlIGV4dGVybmFsIHN0b3JhZ2UuIElmIHRoaXMgaGFwcGVucyAtIHBsdWdpbiB3b24ndCB3b3JrLiBDYW4gb2NjdXIgd2hlbiB0aGVyZSBpcyBub3QgZW5vdWdoIGZyZWUgc3BhY2Ugb24gdGhlIGRldmljZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+fVxuICAgKi9cbiAgQENvcmRvdmEoe1xuICAgIGV2ZW50T2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBldmVudDogJ2NoY3BfYXNzZXRzSW5zdGFsbGF0aW9uRXJyb3InLFxuICB9KVxuICBvbkFzc2V0c0luc3RhbGxhdGlvbkVycm9yKCk6IE9ic2VydmFibGU8SG90Q29kZVB1c2hFdmVudERhdGE+IHtcbiAgICByZXR1cm47XG4gIH1cbn1cbiJdfQ==